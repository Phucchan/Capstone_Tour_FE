<div class="p-4 sm:p-6">
    <div class="flex items-center justify-between mb-4">
        <h1 class="text-2xl font-semibold text-gray-800">Danh sách khách hàng</h1>
        <div class="flex items-center space-x-2">
            <input
                type="text"
                placeholder="Tìm kiếm theo tên, email..."
                class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                [(ngModel)]="keyword"
                (keyup.enter)="onSearch()">
            <button
                (click)="onSearch()"
                class="px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700">
                Tìm kiếm
            </button>
        </div>
    </div>

    <div *ngIf="isLoading" class="flex justify-center items-center h-64">
        <app-spinner></app-spinner>
    </div>

    <div *ngIf="!isLoading && customers.length > 0" class="overflow-x-auto bg-white rounded-lg shadow">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Họ và tên</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Số điện thoại</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trạng thái</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày tham gia</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let customer of customers">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <app-avatar [username]="customer.fullName"></app-avatar>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">{{ customer.fullName }}</div>
                                <div class="text-sm text-gray-500">{{ customer.username }}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ customer.email }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ customer.phone }}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                              [class.bg-green-100]="!customer.deleted" [class.text-green-800]="!customer.deleted"
                              [class.bg-red-100]="customer.deleted" [class.text-red-800]="customer.deleted">
                            {{ customer.deleted ? 'Bị khóa' : 'Hoạt động' }}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ customer.createdAt | date:'dd/MM/yyyy' }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div *ngIf="!isLoading && customers.length === 0" class="text-center py-16 bg-white rounded-lg shadow">
        <p class="text-gray-500">Không tìm thấy khách hàng nào.</p>
    </div>


    <div *ngIf="paging && paging.total > 0" class="mt-4">
        <app-pagination
            [currentPage]="paging.page"
            [totalItems]="paging.total"
            [pageSize]="paging.size"
            (pageChange)="onPageChange($event)">
        </app-pagination>
    </div>
</div>
