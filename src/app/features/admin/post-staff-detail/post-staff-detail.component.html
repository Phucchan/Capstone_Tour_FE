<div class="p-4 sm:p-6">
    <div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow">
        <h1 class="text-2xl font-semibold text-gray-800 mb-6">Thêm nhân viên mới</h1>

        <form [formGroup]="staffForm" (ngSubmit)="onSubmit()">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Full Name -->
                <div>
                    <label for="fullName" class="block mb-2 text-sm font-medium text-gray-900">Họ và tên</label>
                    <input type="text" id="fullName" formControlName="fullName" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" required>
                    <div *ngIf="staffForm.get('fullName')?.touched && staffForm.get('fullName')?.invalid" class="text-red-600 text-sm mt-1">
                        Họ và tên là bắt buộc.
                    </div>
                </div>

                <!-- Username -->
                <div>
                    <label for="username" class="block mb-2 text-sm font-medium text-gray-900">Tên đăng nhập</label>
                    <input type="text" id="username" formControlName="username" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" required>
                    <div *ngIf="staffForm.get('username')?.touched && staffForm.get('username')?.invalid" class="text-red-600 text-sm mt-1">
                        Tên đăng nhập là bắt buộc.
                    </div>
                </div>

                <!-- Email -->
                <div>
                    <label for="email" class="block mb-2 text-sm font-medium text-gray-900">Email</label>
                    <input type="email" id="email" formControlName="email" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" required>
                    <div *ngIf="staffForm.get('email')?.touched && staffForm.get('email')?.invalid" class="text-red-600 text-sm mt-1">
                        <span *ngIf="staffForm.get('email')?.errors?.['required']">Email là bắt buộc.</span>
                        <span *ngIf="staffForm.get('email')?.errors?.['email']">Email không hợp lệ.</span>
                    </div>
                </div>

                <!-- Phone -->
                <div>
                    <label for="phone" class="block mb-2 text-sm font-medium text-gray-900">Số điện thoại</label>
                    <input type="tel" id="phone" formControlName="phone" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" required>
                    <div *ngIf="staffForm.get('phone')?.touched && staffForm.get('phone')?.invalid" class="text-red-600 text-sm mt-1">
                        Số điện thoại là bắt buộc.
                    </div>
                </div>

                <!-- Password -->
                <div class="md:col-span-2">
                    <label for="password" class="block mb-2 text-sm font-medium text-gray-900">Mật khẩu</label>
                    <input type="password" id="password" formControlName="password" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" required>
                     <div *ngIf="staffForm.get('password')?.touched && staffForm.get('password')?.invalid" class="text-red-600 text-sm mt-1">
                        <span *ngIf="staffForm.get('password')?.errors?.['required']">Mật khẩu là bắt buộc.</span>
                        <span *ngIf="staffForm.get('password')?.errors?.['minlength']">Mật khẩu phải có ít nhất 6 ký tự.</span>
                    </div>
                </div>

                <!-- Roles -->
                <div class="md:col-span-2" formArrayName="roleNames">
                    <label class="block mb-2 text-sm font-medium text-gray-900">Vai trò</label>
                    <div class="flex flex-wrap gap-4">
                        <div *ngFor="let role of availableRoles" class="flex items-center">
                            <input type="checkbox" [value]="role" (change)="onRoleChange($event)" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500">
                            <label class="ml-2 text-sm font-medium text-gray-900">{{role}}</label>
                        </div>
                    </div>
                    <div *ngIf="staffForm.get('roleNames')?.touched && staffForm.get('roleNames')?.invalid" class="text-red-600 text-sm mt-1">
                        Vui lòng chọn ít nhất một vai trò.
                    </div>
                </div>
            </div>

            <div class="mt-8 flex justify-end gap-4">
                <a routerLink="/admin/list-staff" class="px-6 py-2.5 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">
                    Hủy
                </a>
                <button type="submit" [disabled]="isSubmitting || staffForm.invalid" class="px-6 py-2.5 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed">
                    {{ isSubmitting ? 'Đang lưu...' : 'Lưu nhân viên' }}
                </button>
            </div>
        </form>
    </div>
</div>
