<ng-container *ngIf="!isLoading && !errorMessage">
  <section class="bg-white py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <h2 class="text-2xl sm:text-3xl font-bold text-center text-blue-800 mb-8 uppercase">Danh sách tour</h2>

      <!-- Bộ lọc tìm kiếm -->
      <div class="bg-gray-100 p-4 rounded-lg mb-6">
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Ngày khởi hành</label>
            <select class="w-full p-2 border rounded" [(ngModel)]="selectedDate" (ngModelChange)="filterTours()">
              <option value="all">Tất cả</option>
              <option value="today">Hôm nay</option>
              <option value="next7days">7 ngày tới</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Giá từ</label>
            <select class="w-full p-2 border rounded" [(ngModel)]="selectedPrice" (ngModelChange)="filterTours()">
              <option value="all">Tất cả</option>
              <option value="lowtohigh">Thấp đến cao</option>
              <option value="hightolow">Cao đến thấp</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Phương tiện</label>
            <select class="w-full p-2 border rounded" [(ngModel)]="selectedTransport" (ngModelChange)="filterTours()">
              <option value="all">Tất cả</option>
              <option value="plane">Máy bay</option>
              <option value="car">Ô tô</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Ngày khởi hành gần nhất</label>
            <select class="w-full p-2 border rounded" [(ngModel)]="selectedRecent" (ngModelChange)="filterTours()">
              <option value="all">Tất cả</option>
              <option value="recent">Gần nhất</option>
            </select>
          </div>
        </div>
        <button class="mt-4 w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 transition" (click)="applyFilters()">
          Áp dụng
        </button>
      </div>

      <!-- Danh sách tour -->
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
        <div *ngFor="let tour of filteredTours" class="group flex flex-col bg-white shadow-md rounded-lg overflow-hidden min-h-[300px]">
          <img [src]="tour.thumbnailUrl || 'assets/images/default-tour.jpg'" alt="{{ tour.name }}" class="w-full h-40 object-cover transition-transform duration-300 group-hover:scale-105" />
          <div class="p-4 flex flex-col h-full">
            <div class="flex-grow">
              <h3 class="text-base font-semibold mb-1 text-gray-800 line-clamp-2">
                {{ tour.name }}
              </h3>
              <p class="text-sm text-gray-500 mb-1">Khu vực: {{ tour.region }}</p>
              <p class="text-sm text-gray-500 mb-1">Địa điểm: {{ tour.locationName }}</p>
              <p class="text-sm text-gray-500 mb-1">{{ tour.durationDays | durationFormat }}</p>
              <p class="text-sm text-yellow-600">Đánh giá: {{ tour.averageRating }}/5 ★</p>
              <p class="text-red-600 font-semibold text-sm">
                Giá từ: {{ tour.startingPrice | number }}đ
              </p>
            </div>
            <div class="mt-4 flex justify-end">
              <a class="text-sm px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition">
                Xem chi tiết
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Thông báo nếu không có tour -->
      <div *ngIf="filteredTours.length === 0" class="text-center text-gray-500 mt-6">
        Không có tour nào phù hợp.
      </div>

      <!-- Phân trang -->
      <div *ngIf="total > 0" class="mt-6 text-center">
        <button [disabled]="page === 0" (click)="prevPage()" class="px-4 py-2 bg-gray-300 rounded mr-2">Trước</button>
        <span>Trang {{ page + 1 }} / {{ totalPages }}</span>
        <button [disabled]="(page + 1) * size >= total" (click)="nextPage()" class="px-4 py-2 bg-gray-300 rounded ml-2">Sau</button>
      </div>
    </div>
  </section>
</ng-container>

<ng-container *ngIf="isLoading">
  <div class="text-center py-10">Đang tải...</div>
</ng-container>

<ng-container *ngIf="errorMessage">
  <div class="text-center py-10 text-red-500">{{ errorMessage }}</div>
</ng-container>