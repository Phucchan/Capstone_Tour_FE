<!-- src/app/features/business/components/location-form/location-form.component.html -->
<form [formGroup]="locationForm" (ngSubmit)="onSubmit()">
  <div class="space-y-6">
    <!-- Image Upload -->
    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Ảnh đại diện</label>
      <div class="mt-2 flex items-center gap-x-3">
        <img *ngIf="imagePreview" [src]="imagePreview" alt="Image preview" class="h-24 w-24 object-cover rounded-lg">
        <div *ngIf="!imagePreview" class="h-24 w-24 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center">
          <svg class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
        </div>
        <div>
          <input #fileInput type="file" class="hidden" (change)="onFileChange($event)" accept="image/png, image/jpeg, image/webp">
          <button (click)="fileInput.click()" type="button" class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
            {{ imagePreview ? 'Thay đổi ảnh' : 'Chọn ảnh' }}
          </button>
          <p class="text-xs text-gray-500 mt-1">PNG, JPG, WEBP tối đa 5MB.</p>
        </div>
      </div>
    </div>

    <!-- Location Name -->
    <div>
      <label for="name" class="block text-sm font-medium leading-6 text-gray-900 dark:text-white">Tên địa điểm</label>
      <div class="mt-2">
        <input type="text" id="name" formControlName="name" class="block w-full rounded-md border-0 py-2 px-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 dark:bg-gray-700 dark:text-white dark:ring-gray-600">
        <div *ngIf="f['name'].touched && f['name'].errors" class="text-red-500 text-xs mt-1">
          <span *ngIf="f['name'].errors?.['required']">Tên địa điểm là bắt buộc.</span>
          <span *ngIf="f['name'].errors?.['minlength']">Tên phải có ít nhất 3 ký tự.</span>
        </div>
      </div>
    </div>

    <!-- Description -->
    <div>
      <label for="description" class="block text-sm font-medium leading-6 text-gray-900 dark:text-white">Mô tả</label>
      <div class="mt-2">
        <textarea id="description" formControlName="description" rows="4" class="block w-full rounded-md border-0 py-2 px-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 dark:bg-gray-700 dark:text-white dark:ring-gray-600"></textarea>
        <div *ngIf="f['description'].touched && f['description'].errors" class="text-red-500 text-xs mt-1">
          <span *ngIf="f['description'].errors?.['required']">Mô tả là bắt buộc.</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Form Actions -->
  <div class="mt-8 pt-5 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-x-3">
    <button (click)="cancel()" type="button" class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
      Hủy
    </button>
    <button type="submit" [disabled]="isSubmitting" class="inline-flex justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:bg-indigo-400 disabled:cursor-not-allowed">
      <!-- SỬA LỖI: Thay thế app-spinner bằng SVG spinner của bạn -->
      <svg *ngIf="isSubmitting" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
      <span>{{ isSubmitting ? 'Đang lưu...' : 'Lưu lại' }}</span>
    </button>
  </div>
</form>
